(this["webpackJsonp3js-clothing-preview"]=this["webpackJsonp3js-clothing-preview"]||[]).push([[0],{39:function(e,t,n){e.exports=n(82)},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},65:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r,a,i,s,c,o,l,u,h,d,p,b,m,f,v,j,y,O,w,g,k,S,x,C,E,P,N,z=n(1),T=n.n(z),F=n(35),R=n.n(F),J=(n(44),n(5)),I=n.n(J),A=n(21),D=n(11),q=n(8),M=n(7),_=n(4),L=n(10),B=n(6),H=n(2),W=(n(46),n(47),n(0)),V=n(24),G=n(36),Y=n(38),$=n(13),K=n(14),Q=(n(48),n(3));!function(e){e[e.None=0]="None",e[e.Jacket=1]="Jacket",e[e.Pants=2]="Pants",e[e.Shirt=4]="Shirt",e[e.Shoes=8]="Shoes"}(N||(N={}));var U=[N.Jacket,N.Pants,N.Shirt,N.Shoes];function X(e){switch(e){case N.Jacket:return"Jacket";case N.Pants:return"Pants";case N.Shirt:return"Shirt";case N.Shoes:return"Shoes"}}var Z=(r=Object(Q.Field)(),a=Object(Q.Type)(Number),i=Object(Q.Field)(),s=Object(Q.Type)(String),c=Object(Q.Field)(),o=Object(Q.Type)(String),l=function e(){Object(H.a)(this,e),Object($.a)(this,"id",u,this),Object($.a)(this,"name",h,this),Object($.a)(this,"type",d,this)},u=Object(K.a)(l.prototype,"id",[r,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=Object(K.a)(l.prototype,"name",[i,s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(K.a)(l.prototype,"type",[c,o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l),ee=(p=Object(Q.Field)(),b=Object(Q.Type)(Number),m=Object(Q.Field)(),f=Object(Q.Type)(String),v=Object(Q.Field)(),j=Object(Q.Type)(String),y=Object(Q.Field)(),O=Object(Q.Type)(Number),w=Object(Q.Field)(),g=Object(Q.Type)(Number),k=function(){function e(){Object(H.a)(this,e),Object($.a)(this,"id",S,this),Object($.a)(this,"name",x,this),Object($.a)(this,"url",C,this),Object($.a)(this,"appliesTo",E,this),Object($.a)(this,"scale",P,this)}return Object(q.a)(e,[{key:"equals",value:function(e){return null!=e&&this.id===e.id}}]),e}(),S=Object(K.a)(k.prototype,"id",[p,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=Object(K.a)(k.prototype,"name",[m,f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(K.a)(k.prototype,"url",[v,j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object(K.a)(k.prototype,"appliesTo",[y,O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(K.a)(k.prototype,"scale",[w,g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k),te=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(H.a)(this,t),(e=Object(M.a)(this,Object(_.a)(t).call(this,null))).checkDataEqualityFunction=function(e,t){return e===t},e.set(N.Jacket,n),e.set(N.Pants,n),e.set(N.Shirt,n),e.set(N.Shoes,n),e}return Object(B.a)(t,e),Object(q.a)(t,[{key:"equals",value:function(e){if(null==e)return!1;var t=!0,n=!1,r=void 0;try{for(var a,i=this[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value,c=Object(A.a)(s,2),o=c[0],l=c[1];if(!this.checkDataEqualityFunction(l,e.get(o)))return!1}}catch(u){n=!0,r=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!0}}]),t}(Object(Y.a)(Map)),ne=function(e){function t(){var e;return Object(H.a)(this,t),(e=Object(M.a)(this,Object(_.a)(t).call(this,null))).checkDataEqualityFunction=function(e,t){return null!=e&&e.equals(t)},e}return Object(B.a)(t,e),t}(te),re="https://recengine.azurewebsites.net",ae=new te(""),ie=!0,se=!1,ce=void 0;try{for(var oe,le=ae.keys()[Symbol.iterator]();!(ie=(oe=le.next()).done);ie=!0){var ue=oe.value;ae.set(ue,X(ue).toLowerCase()+"_mask.jpg")}}catch(Oe){se=!0,ce=Oe}finally{try{ie||null==le.return||le.return()}finally{if(se)throw ce}}var he=function(e){function t(e,n){var r;return Object(H.a)(this,t),(r=Object(M.a)(this,Object(_.a)(t).call(this,e,n))).viewPortCanvas=void 0,r.viewPort=void 0,r.camera=void 0,r.renderer=void 0,r.controls=void 0,r.scene=void 0,r.clothesObj=void 0,r.render=r.render.bind(Object(L.a)(r)),r.recenterCamera=r.recenterCamera.bind(Object(L.a)(r)),r.handleResize=r.handleResize.bind(Object(L.a)(r)),r.state={loading:!1},r}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this;return T.a.createElement("div",{className:"SuitPreview"},T.a.createElement("div",{className:"ThreeJsViewPort",ref:function(t){return e.viewPort=t},style:this.state.loading?{display:"none"}:{}},T.a.createElement("canvas",{className:"ViewPort",ref:function(t){return e.viewPortCanvas=t}})),T.a.createElement("div",{style:this.state.loading?{}:{display:"none"},className:"lds-circle"},T.a.createElement("div",null)))}},{key:"promisifyLoadTexture",value:function(){var e=Object(D.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new W.y,e.abrupt("return",new Promise((function(e,r){n.load(t,(function(t){try{e(t)}catch(n){r(n)}}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r,a=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.camera=new W.s(50,1,1,1e4),2,this.camera.position.set(150,150,250),this.camera.zoom=1.8,this.scene=new W.w,this.scene.background=new W.d(9474192),e.next=8,new Promise(function(){var e=Object(D.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(new V.a).load("smoothed_headless_man_no_low_half.obj",(function(e){t(e)}))}catch(r){n(r)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 8:return t=e.sent,n=new W.q({color:new W.d("white"),metalness:.3}),t.traverse((function(e){e instanceof W.n&&(e.material=n)})),t.translateY(.441),this.scene.add(t),e.next=15,new Promise(function(){var e=Object(D.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(new V.a).load("clothes_smoothed.obj",(function(e){t(e)}))}catch(r){n(r)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 15:this.clothesObj=e.sent,this.scene.add(this.clothesObj),this.scene.add(new W.a(10197915)),(r=new W.x(10197915)).position.set(300,300,300),this.scene.add(r),800,800,this.renderer=new W.C({canvas:this.viewPortCanvas,antialias:!0,precision:"lowp",powerPreference:"high-performance"}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(800,800,!0),this.controls=new G.a(this.camera,this.renderer.domElement),this.controls.rotateSpeed=5,this.controls.zoomSpeed=4,this.controls.panSpeed=.8,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.controls.keys=[65,83,68],this.controls.addEventListener("change",(function(){return a.renderer.render(a.scene,a.camera)})),this.controls.enabled=!0,this.controls.update(),this.recenterCamera(),window.addEventListener("resize",this.handleResize,!1),this.handleResize(),setInterval((function(){a.controls.update(),a.camera.updateProjectionMatrix(),a.renderer.render(a.scene,a.camera)}),10);case 40:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleResize",value:function(){this.camera.aspect=this.viewPort.clientWidth/this.viewPort.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.viewPort.clientWidth,this.viewPort.clientHeight)}},{key:"recenterCamera",value:function(){var e=new W.b;e.setFromObject(this.clothesObj),e.getCenter(this.controls.target)}},{key:"updateFabrics",value:function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.promisifyLoadTexture(re+"/fabric/"+t.get(N.Jacket).id+"/"+t.get(N.Shirt).id+"/"+t.get(N.Pants).id+"/"+t.get(N.Shoes).id);case 3:n=e.sent,r=new W.o({map:n}),this.clothesObj.traverse((function(e){e instanceof W.n&&"man_body"!==e.name&&(e.material=r)})),this.recenterCamera(),this.setState({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(T.a.Component),de=(n(65),n(9)),pe=n(37),be=n.n(pe),me=function(e){function t(e,n){var r;return Object(H.a)(this,t),(r=Object(M.a)(this,Object(_.a)(t).call(this,e,n))).state={tags:[]},r}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return T.a.createElement("div",null,T.a.createElement(de.Col,{className:"Col"},X(this.props.suitItem))," ",T.a.createElement("br",null),T.a.createElement(de.Col,{className:"Col"},T.a.createElement(be.a,{tags:this.state.tags,suggestions:this.props.suggestions,handleDelete:this.handleDelete.bind(this),handleAddition:this.handleAddition.bind(this),placeholder:"Enter ".concat(X(this.props.suitItem)," Attributes"),allowNew:!1,autoresize:!1})))}},{key:"handleDelete",value:function(e){var t=this.state.tags.slice(0);t.splice(e,1),this.setState({tags:t}),this.props.onChange(t)}},{key:"handleAddition",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.state.tags[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){if(a.value.id===e.id)return}}catch(Oe){n=!0,r=Oe}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var s=[].concat(this.state.tags,e);this.setState({tags:s}),this.props.onChange(s)}}]),t}(T.a.Component),fe=(n(81),function(e){function t(){return Object(H.a)(this,t),Object(M.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return T.a.createElement("div",{className:"RecommendationSuitPartDisplay",style:{backgroundImage:"url("+this.props.recommendation.get(this.props.suitItem).url+")"}},T.a.createElement("div",{className:"TextBackdrop"},T.a.createElement("h3",null,X(this.props.suitItem)),T.a.createElement("p",null,this.props.recommendation.get(this.props.suitItem).name)))}}]),t}(T.a.Component)),ve=function(e){function t(e,n){var r;return Object(H.a)(this,t),(r=Object(M.a)(this,Object(_.a)(t).call(this,e,n))).state={hover:!1},r}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this;return T.a.createElement(de.Col,{className:"Recommendation"+(this.props.selected?" Selected":"")+(this.state.hover&&!this.props.selected?" Hover":""),onMouseOver:function(t){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},onClick:this.props.onClick},U.map((function(t){return T.a.createElement(fe,{recommendation:e.props.recommendation,suitItem:t,key:t})})))}}]),t}(T.a.Component),je=function(e){function t(e,n){var r;return Object(H.a)(this,t),(r=Object(M.a)(this,Object(_.a)(t).call(this,e,n))).previouslyClickedElement=null,r.state={selection:null},r}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this,t=this.props.recommendations.map((function(t){var n="",r=!0,a=!1,i=void 0;try{for(var s,c=t.keys()[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var o=s.value;n+="".concat(X(o),": ").concat(t.get(o).name)}}catch(Oe){a=!0,i=Oe}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return T.a.createElement(de.Row,{key:n,className:"Row"},T.a.createElement(de.Col,{className:"Col"},T.a.createElement(ve,{recommendation:t,selected:null!=e.state.selection&&e.state.selection.equals(t),onClick:function(){e.props.onSelectionChanged(t),e.setState({selection:t})}}),t===e.props.recommendations[e.props.recommendations.length-1]?T.a.createElement("br",null):T.a.createElement("div",null,T.a.createElement("br",null),T.a.createElement("hr",null),T.a.createElement("br",null))))}));return T.a.createElement("div",{className:"RecommendationsCarousel HorizontalScrollContainer"},T.a.createElement(de.Col,null,t))}}]),t}(T.a.Component),ye=function(e){function t(e,n){var r;return Object(H.a)(this,t),(r=Object(M.a)(this,Object(_.a)(t).call(this,e,n))).clothingPreview=void 0,r.refreshSuggestions=r.refreshSuggestions.bind(Object(L.a)(r)),r.handleSelectedTagsChange=r.handleSelectedTagsChange.bind(Object(L.a)(r)),r.state={selectedAttributes:new te([]),selectedSuggestion:new ne,activeSuggestion:new ne,attributes:[],recommendations:[]},r}return Object(B.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this;return T.a.createElement(de.Row,{className:"App"},T.a.createElement(de.Col,{className:"Col"},U.map((function(t){return T.a.createElement(me,{key:X(t),suggestions:e.state.attributes,onChange:function(n){return e.handleSelectedTagsChange(t,n)},suitItem:t})})),T.a.createElement("button",{className:"RerollButton",onClick:function(t){return e.refreshSuggestions()}}," Reroll Suggestions "),T.a.createElement("div",{style:{width:"100%",height:"100%",justifyContent:"center"}},T.a.createElement(je,{recommendations:this.state.recommendations,onSelectionChanged:function(t){e.setState({selectedSuggestion:t}),e.clothingPreview.updateFabrics(t)}}))),T.a.createElement(de.Col,{className:"Col"},T.a.createElement(he,{ref:function(t){return e.clothingPreview=t}})))}},{key:"refreshSuggestions",value:function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r,a,i,s,c,o,l,u,h,d,p,b,m,f,v,j,y,O,w,g,k,S,x,C,E,P,N,z,T,F;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,r=!1,a=void 0,e.prev=4,i=this.state.selectedAttributes[Symbol.iterator]();case 6:if(n=(s=i.next()).done){e.next=33;break}for(c=s.value,o=Object(A.a)(c,2),l=o[0],u=o[1],h=!0,d=!1,p=void 0,e.prev=14,b=u[Symbol.iterator]();!(h=(m=b.next()).done);h=!0)f=m.value,t.push({Part:l,AdjectiveId:f.id});e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),d=!0,p=e.t0;case 22:e.prev=22,e.prev=23,h||null==b.return||b.return();case 25:if(e.prev=25,!d){e.next=28;break}throw p;case 28:return e.finish(25);case 29:return e.finish(22);case 30:n=!0,e.next=6;break;case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(4),r=!0,a=e.t1;case 39:e.prev=39,e.prev=40,n||null==i.return||i.return();case 42:if(e.prev=42,!r){e.next=45;break}throw a;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return e.next=49,fetch("".concat(re,"/recommendations/",5),{method:"POST",body:JSON.stringify(t),headers:[["accept","text/plain"],["Content-Type","application/json"]]});case 49:if((v=e.sent).ok){e.next=58;break}return console.error(v.statusText),e.t2=console,e.next=55,v.text();case 55:return e.t3=e.sent,e.t2.error.call(e.t2,e.t3),e.abrupt("return");case 58:return e.next=60,v.json();case 60:j=e.sent,y=[],O=!0,w=!1,g=void 0,e.prev=65,k=j[Symbol.iterator]();case 67:if(O=(S=k.next()).done){e.next=93;break}for(x=S.value,C=new ne,E=!0,P=!1,N=void 0,e.prev=73,z=C.keys()[Symbol.iterator]();!(E=(T=z.next()).done);E=!0)F=T.value,C.set(F,Object(Q.deserialize)(x[X(F).toLowerCase()],ee));e.next=81;break;case 77:e.prev=77,e.t4=e.catch(73),P=!0,N=e.t4;case 81:e.prev=81,e.prev=82,E||null==z.return||z.return();case 84:if(e.prev=84,!P){e.next=87;break}throw N;case 87:return e.finish(84);case 88:return e.finish(81);case 89:y.push(C);case 90:O=!0,e.next=67;break;case 93:e.next=99;break;case 95:e.prev=95,e.t5=e.catch(65),w=!0,g=e.t5;case 99:e.prev=99,e.prev=100,O||null==k.return||k.return();case 102:if(e.prev=102,!w){e.next=105;break}throw g;case 105:return e.finish(102);case 106:return e.finish(99);case 107:this.setState({recommendations:y});case 108:case"end":return e.stop()}}),e,this,[[4,35,39,47],[14,18,22,30],[23,,25,29],[40,,42,46],[65,95,99,107],[73,77,81,89],[82,,84,88],[100,,102,106]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r,a,i,s,c,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(re+"/adjectives",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:for(n=e.sent,r=[],a=!0,i=!1,s=void 0,e.prev=10,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0)l=o.value,r.push(Object(Q.deserialize)(l,Z));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),i=!0,s=e.t0;case 18:e.prev=18,e.prev=19,a||null==c.return||c.return();case 21:if(e.prev=21,!i){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.setState({attributes:r}),this.handleSelectedTagsChange(N.Jacket,[]);case 28:case"end":return e.stop()}}),e,this,[[10,14,18,26],[19,,21,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSelectedTagsChange",value:function(){var e=Object(D.a)(I.a.mark((function e(t,n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.state.selectedAttributes).set(t,n),this.setState({selectedAttributes:r}),this.refreshSuggestions();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(T.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));R.a.render(T.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.947ec2bf.chunk.js.map